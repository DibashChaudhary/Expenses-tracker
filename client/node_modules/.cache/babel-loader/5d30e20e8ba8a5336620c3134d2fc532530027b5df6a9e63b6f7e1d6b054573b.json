{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dibashchaudhary/Desktop/Dented Code/Development/practice-project/Full-Stack/ expenses tracker/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/dibashchaudhary/Desktop/Dented Code/Development/practice-project/Full-Stack/ expenses tracker/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/dibashchaudhary/Desktop/Dented Code/Development/practice-project/Full-Stack/ expenses tracker/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/dibashchaudhary/Desktop/Dented Code/Development/practice-project/Full-Stack/ expenses tracker/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{Button,Form}from\"react-bootstrap\";import Table from\"react-bootstrap/Table\";import{deleteTrans}from\"../../utils/axiosHelper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var TransTable=function TransTable(_ref){var trans=_ref.trans,getTrans=_ref.getTrans;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),itemToDelete=_useState2[0],setItemToDelete=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAllSelected=_useState4[0],setIsAllSelected=_useState4[1];var handleOnSelect=function handleOnSelect(e){var _e$target=e.target,checked=_e$target.checked,value=_e$target.value;console.log(checked,value);if(checked){setItemToDelete([].concat(_toConsumableArray(itemToDelete),[value]));setIsAllSelected(trans.length===itemToDelete.length+1);}else{setItemToDelete(itemToDelete.filter(function(_id){return _id!==value;}));setIsAllSelected(false);}};var handleOnAllSelect=function handleOnAllSelect(e){var checked=e.target.checked;if(checked){setItemToDelete(trans.map(function(_ref2){var _id=_ref2._id;return _id;}));setIsAllSelected(true);}else{setItemToDelete([]);setIsAllSelected(false);}};var total=trans.reduce(function(acc,_ref3){var type=_ref3.type,amount=_ref3.amount;return type===\"income\"?acc+amount:acc-amount;},0);var handleOnDelete=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$deleteTrans,status,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.confirm(\"Are you sure you want to delete \".concat(itemToDelete.length,\"  transactions?\"))){_context.next=7;break;}_context.next=3;return deleteTrans(itemToDelete);case 3:_yield$deleteTrans=_context.sent;status=_yield$deleteTrans.status;message=_yield$deleteTrans.message;if(status===\"success\"){setItemToDelete([]);getTrans();}case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleOnDelete(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",onChange:handleOnAllSelect,checked:isAllSelected// checked={trans.length === itemToDelete.length}\n})}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Transaction\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Income\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Expenses\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[trans.map(function(item,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",onChange:handleOnSelect,value:item._id,checked:itemToDelete.includes(item._id)})}),/*#__PURE__*/_jsxs(\"td\",{children:[new Date(item.createdAt).toLocaleString(),\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),item.type===\"income\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"$ \",item.amount]}),/*#__PURE__*/_jsx(\"td\",{})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-danger\",children:[\"-$ \",item.amount]})]})]},item._id);}),/*#__PURE__*/_jsxs(\"tr\",{className:\"fw-bolder\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:3,children:\"Total balance\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",total]})]})]})]}),itemToDelete.length?/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsxs(Button,{variant:\"danger\",onClick:handleOnDelete,getTrans:getTrans,children:[\"Delete \",itemToDelete.length,\" item(s)\"]})}):null]});};","map":{"version":3,"names":["useState","Button","Form","Table","deleteTrans","TransTable","trans","getTrans","itemToDelete","setItemToDelete","isAllSelected","setIsAllSelected","handleOnSelect","e","target","checked","value","console","log","length","filter","_id","handleOnAllSelect","map","total","reduce","acc","type","amount","handleOnDelete","window","confirm","status","message","item","i","includes","Date","createdAt","toLocaleString","name"],"sources":["/Users/dibashchaudhary/Desktop/Dented Code/Development/practice-project/Full-Stack/ expenses tracker/client/src/components/table/TransTable.js"],"sourcesContent":["import { useState } from \"react\";\nimport { Button, Form } from \"react-bootstrap\";\nimport Table from \"react-bootstrap/Table\";\nimport { deleteTrans } from \"../../utils/axiosHelper\";\n\nexport const TransTable = ({ trans, getTrans }) => {\n  const [itemToDelete, setItemToDelete] = useState([]);\n  const [isAllSelected, setIsAllSelected] = useState(false);\n\n  const handleOnSelect = (e) => {\n    const { checked, value } = e.target;\n    console.log(checked, value);\n\n    if (checked) {\n      setItemToDelete([...itemToDelete, value]);\n      setIsAllSelected(trans.length === itemToDelete.length + 1);\n    } else {\n      setItemToDelete(itemToDelete.filter((_id) => _id !== value));\n      setIsAllSelected(false);\n    }\n  };\n\n  const handleOnAllSelect = (e) => {\n    const checked = e.target.checked;\n\n    if (checked) {\n      setItemToDelete(trans.map(({ _id }) => _id));\n      setIsAllSelected(true);\n    } else {\n      setItemToDelete([]);\n      setIsAllSelected(false);\n    }\n  };\n\n  const total = trans.reduce(\n    (acc, { type, amount }) =>\n      type === \"income\" ? acc + amount : acc - amount,\n    0\n  );\n\n  const handleOnDelete = async () => {\n    if (\n      window.confirm(\n        `Are you sure you want to delete ${itemToDelete.length}  transactions?`\n      )\n    ) {\n      const { status, message } = await deleteTrans(itemToDelete);\n      if (status === \"success\") {\n        setItemToDelete([]);\n        getTrans();\n      }\n    }\n  };\n\n  return (\n    <>\n      <Table striped bordered hover>\n        <thead>\n          <tr>\n            <th>\n              <Form.Check\n                type=\"checkbox\"\n                onChange={handleOnAllSelect}\n                checked={isAllSelected}\n                // checked={trans.length === itemToDelete.length}\n              />\n            </th>\n            <th>Date</th>\n            <th>Transaction</th>\n            <th>Income</th>\n            <th>Expenses</th>\n          </tr>\n        </thead>\n        <tbody>\n          {trans.map((item, i) => (\n            <tr key={item._id}>\n              <td>\n                <Form.Check\n                  type=\"checkbox\"\n                  onChange={handleOnSelect}\n                  value={item._id}\n                  checked={itemToDelete.includes(item._id)}\n                />\n              </td>\n              <td>\n                {new Date(item.createdAt).toLocaleString()}{\" \"}\n                {/* {new Date(item.createdAt).toLocaleTimeString()} */}\n              </td>\n\n              <td>{item.name}</td>\n              {item.type === \"income\" ? (\n                <>\n                  <td>$ {item.amount}</td>\n                  <td></td>\n                </>\n              ) : (\n                <>\n                  <td></td>\n                  <td className=\"text-danger\">-$ {item.amount}</td>\n                </>\n              )}\n            </tr>\n          ))}\n\n          <tr className=\"fw-bolder\">\n            <td colSpan={3}>Total balance</td>\n            <td>${total}</td>\n          </tr>\n        </tbody>\n      </Table>\n      {itemToDelete.length ? (\n        <div className=\"d-grid\">\n          <Button variant=\"danger\" onClick={handleOnDelete} getTrans={getTrans}>\n            Delete {itemToDelete.length} item(s)\n          </Button>\n        </div>\n      ) : null}\n    </>\n  );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}