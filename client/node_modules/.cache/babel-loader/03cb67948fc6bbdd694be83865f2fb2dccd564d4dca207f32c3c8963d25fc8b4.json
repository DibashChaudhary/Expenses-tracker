{"ast":null,"code":"import axios from \"axios\";\n\n//const rootUrl = \"http://localhost:8000/api/v1\"\nconst rootUrl = process.env.NODE === \"production\" ? \"/api/v1\" : \"http://localhost:8000/api/v1\";\nconst userUrl = rootUrl + \"/user\";\nconst transUrl = rootUrl + \"/transaction\";\nconst getUserIdFromStorage = () => {\n  const user = sessionStorage.getItem(\"user\");\n  if (user) {\n    const userObj = JSON.parse(user);\n    console.log(userObj._id);\n    return userObj === null || userObj === void 0 ? void 0 : userObj._id;\n  }\n};\n//==== user section\n//send data to server to add to db\nexport const postUser = formData => {\n  try {\n    return axios.post(userUrl, formData);\n  } catch (error) {\n    return {\n      status: error,\n      message: error.message\n    };\n  }\n};\n//login user\nexport const loginUser = formData => {\n  try {\n    return axios.post(userUrl + \"/login\", formData);\n  } catch (error) {\n    return {\n      status: error,\n      message: error.message\n    };\n  }\n};\n\n//=====transaction section\nexport const postTrans = async formData => {\n  try {\n    const userId = getUserIdFromStorage();\n    if (!userId) {\n      return {\n        status: \"error\",\n        message: \"you must be logged in\"\n      };\n    }\n    const {\n      data\n    } = await axios.post(transUrl, formData, {\n      headers: {\n        Authorization: userId\n      }\n    });\n    return data;\n  } catch (error) {\n    return {\n      status: error,\n      message: error.message\n    };\n  }\n};\n\n//get user specific transactions\nexport const fetchTrans = async () => {\n  try {\n    const userId = getUserIdFromStorage();\n    if (!userId) {\n      return {\n        status: \"error\",\n        message: \"you must be logged In\"\n      };\n    }\n    const {\n      data\n    } = await axios.get(transUrl, {\n      headers: {\n        Authorization: userId\n      }\n    });\n    return data;\n  } catch (error) {\n    return {\n      status: \"error\",\n      message: error.message\n    };\n  }\n};\n\n//get user specific transactions\nexport const deleteTrans = async ids => {\n  try {\n    const userId = getUserIdFromStorage();\n    if (!userId) {\n      return {\n        status: \"error\",\n        message: \"you must be logged In\"\n      };\n    }\n    const {\n      data\n    } = await axios.delete(transUrl, {\n      data: ids,\n      headers: {\n        Authorization: userId\n      }\n    });\n    console.log(data, \"lkjhgsdfgb\");\n    return data;\n  } catch (error) {\n    return {\n      status: \"error\",\n      message: error.message\n    };\n  }\n};","map":{"version":3,"names":["axios","rootUrl","process","env","NODE","userUrl","transUrl","getUserIdFromStorage","user","sessionStorage","getItem","userObj","JSON","parse","console","log","_id","postUser","formData","post","error","status","message","loginUser","postTrans","userId","data","headers","Authorization","fetchTrans","get","deleteTrans","ids","delete"],"sources":["/Users/dibashchaudhary/Desktop/Dented Code/Development/practice-project/Full-Stack/ expenses tracker/client/src/utils/axiosHelper.js"],"sourcesContent":["import axios from \"axios\"\n\n//const rootUrl = \"http://localhost:8000/api/v1\"\nconst rootUrl = process.env.NODE===\"production\"\n  ? \"/api/v1\"\n  : \"http://localhost:8000/api/v1\"\n\nconst userUrl = rootUrl + \"/user\"\nconst transUrl = rootUrl + \"/transaction\"\n\nconst getUserIdFromStorage = () => {\n    const user = sessionStorage.getItem(\"user\")\n    if(user){\n        const userObj = JSON.parse(user)\n        console.log(userObj._id)\n        return userObj?._id;\n    }\n}\n//==== user section\n//send data to server to add to db\nexport const postUser = (formData) =>{\n    try {\n        return axios.post(userUrl, formData)\n    } catch (error) {\n        return {\n            status:error,\n            message: error.message\n        }\n    }\n}\n//login user\nexport const loginUser = (formData) =>{\n    try {\n        return axios.post(userUrl + \"/login\", formData)\n    } catch (error) {\n        return {\n            status:error,\n            message: error.message\n        }\n    }\n}\n\n//=====transaction section\nexport const postTrans = async (formData) =>{\n\n    try {\n        const userId = getUserIdFromStorage();\n        if(!userId){\n            return {\n                status:\"error\",\n                message:\"you must be logged in\",\n            }\n        }\n        const { data } = await axios.post(transUrl, formData, {\n            headers: {\n                Authorization: userId,\n            }\n        });\n        return data;\n    } catch (error) {\n        return {\n            status:error,\n            message: error.message\n        }\n    }\n}\n\n//get user specific transactions\nexport const fetchTrans = async () => {\n    try {\n      const userId = getUserIdFromStorage();\n  \n      if (!userId) {\n        return {\n          status: \"error\",\n          message: \"you must be logged In\",\n        };\n      }\n  \n      const { data } = await axios.get(transUrl, {\n        headers: {\n          Authorization: userId,\n        },\n      });\n      return data;\n    } catch (error) {\n      return {\n        status: \"error\",\n        message: error.message,\n      };\n    }\n  };\n\n//get user specific transactions\nexport const deleteTrans = async (ids) => {\n    try {\n      const userId = getUserIdFromStorage();\n  \n      if (!userId) {\n        return {\n          status: \"error\",\n          message: \"you must be logged In\",\n        };\n      }\n  \n      const { data } = await axios.delete(transUrl, {\n        data: ids,\n        headers: {\n          Authorization: userId,\n        },\n      });\n      console.log(data, \"lkjhgsdfgb\");\n      return data;\n    } catch (error) {\n      return {\n        status: \"error\",\n        message: error.message,\n      };\n    }\n  };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}